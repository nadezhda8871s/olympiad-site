
{% extends "base.html" %}
{% load i18n %}
{% block title %}{% trans "Главная" %}{% endblock %}

{% block content %}
<section class="hero hero-centered">
  <div class="container">
    <h1>Онлайн научные мероприятия для школьников, учащихся СПО, студентов, аспирантов, учёных</h1>
    <p>Наградные документы высылаются в течение 5 дней с даты регистрации.</p>

    <style>
      /* --- Только для верхних трех кнопок на главной --- */
      .hero-centered{display:grid;align-items:center}
      .hero-centered .tiles{
        display:grid;
        grid-template-columns:repeat(3, minmax(260px, 1fr));
        gap:16px;
        max-width:1200px;
        margin:24px auto 8px;
        justify-items:stretch;
      }
      .hero-centered .tile{
        display:grid; gap:6px; align-content:center; justify-items:center;
        min-height:64px;              /* меньше высота */
        padding:12px 16px;            /* компактнее отступы */
        text-align:center;
        border-radius:16px;
      }
      .hero-centered .tile-title{
        font-weight:800;
        font-size:clamp(1.05rem, 1.1vw + .9rem, 1.25rem);
        line-height:1.2;
      }
      .hero-centered .tile-sub{
        opacity:.85;
        font-size:.95rem;
        line-height:1.35;
      }
      @media(max-width:1100px){
        .hero-centered .tiles{ grid-template-columns:repeat(2, minmax(220px, 1fr)) }
      }
      @media(max-width:700px){
        .hero-centered .tiles{ grid-template-columns:1fr }
      }
    </style>

    <div class="tiles">
      <a class="tile" href="/olympiads/">
        <span class="tile-title">Олимпиады</span>
        <span class="tile-sub">Олимпиады для школьников, учащихся СПО, студентов, аспирантов</span>
      </a>
      <a class="tile" href="/contests/">
        <span class="tile-title">Конкурсы</span>
        <span class="tile-sub">Конкурсы СТАТЕЙ, научных работ, ВКР</span>
      </a>
      <a class="tile" href="/conferences/">
        <span class="tile-title">Конференции</span>
        <span class="tile-sub">Конференции для студентов, ППС и ученых</span>
      </a>
    </div>

    <h2>Актуальные мероприятия</h2>

    <style>
      /* Сетка карточек только на этой странице, без переопределения ваших кнопок */
      .cards-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:24px}
      @media(max-width:1100px){.cards-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
      @media(max-width:700px){.cards-grid{grid-template-columns:1fr}}
      .card{background:#fff;border:1px solid #e5e7eb;border-radius:8px;padding:16px;display:flex;flex-direction:column}
      .card-actions{margin-top:auto;display:flex;flex-wrap:wrap;gap:10px}
    </style>

    <div class="cards-grid">
      {% for ev in featured_events %}
        <div class="card">
          <h3>{{ ev.title }}</h3>
          <p>{{ ev.description|default:ev.short_description|truncatechars:160 }}</p>
          <div class="card-actions">
            {% if ev.info_file %}<a href="{{ ev.info_file.url }}" download>Информационное письмо</a>{% endif %}
            <a href="{{ ev.get_register_url }}">Регистрация</a>
          </div>
        </div>
      {% empty %}
        <p>Пока нет актуальных мероприятий.</p>
      {% endfor %}
    </div>

  </div>
</section>
{% endblock %}
